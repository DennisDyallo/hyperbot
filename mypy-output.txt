src/use_cases/common/response_parser.py:100: error: Returning Any from function declared to return "int"  [no-any-return]
src/bot/menus.py:97: error: Incompatible default for argument "top_coins" (default has type "None", argument has type "list[str]")  [assignment]
src/bot/menus.py:97: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
src/bot/menus.py:97: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
src/bot/middleware.py:38: error: Item "None" of "User | None" has no attribute "username"  [union-attr]
src/bot/middleware.py:52: error: Item "None" of "User | None" has no attribute "username"  [union-attr]
src/services/scale_order_service.py:249: error: "initialize" of "HyperliquidService" does not return a value (it only ever returns None)  [func-returns-value]
src/services/scale_order_service.py:283: error: Missing named argument "error" for "OrderPlacement"  [call-arg]
src/services/scale_order_service.py:297: error: Missing named argument "error" for "OrderPlacement"  [call-arg]
src/services/scale_order_service.py:356: error: Incompatible types in assignment (expression has type "ScaleOrderResult", variable has type "dict[str, Any]")  [assignment]
src/services/scale_order_service.py:367: error: Argument "status" to "ScaleOrderResult" has incompatible type "str"; expected "Literal['completed', 'partial', 'failed']"  [arg-type]
src/services/scale_order_service.py:372: error: "dict[str, Any]" has no attribute "scale_order_id"  [attr-defined]
src/services/scale_order_service.py:388: error: "dict[str, Any]" has no attribute "scale_order_id"  [attr-defined]
src/services/scale_order_service.py:393: error: Incompatible return value type (got "dict[str, Any]", expected "ScaleOrderResult")  [return-value]
src/services/market_data_service.py:104: error: Returning Any from function declared to return "dict[str, Any]"  [no-any-return]
src/services/market_data_service.py:138: error: Returning Any from function declared to return "dict[str, Any]"  [no-any-return]
src/services/market_data_service.py:172: error: Returning Any from function declared to return "dict[str, Any] | None"  [no-any-return]
src/bot/utils.py:248: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
src/bot/utils.py:286: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
src/bot/utils.py:323: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
src/services/position_service.py:36: error: Returning Any from function declared to return "list[dict[str, Any]]"  [no-any-return]
src/bot/handlers/wizard_scale_order.py:53: error: Item "None" of "dict[Any, Any] | None" has no attribute "clear"  [union-attr]
src/bot/handlers/wizard_scale_order.py:55: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
src/bot/handlers/wizard_scale_order.py:72: error: Item "None" of "CallbackQuery | None" has no attribute "answer"  [union-attr]
src/bot/handlers/wizard_scale_order.py:75: error: Item "None" of "dict[Any, Any] | None" has no attribute "clear"  [union-attr]
src/bot/handlers/wizard_scale_order.py:77: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/wizard_scale_order.py:92: error: Item "None" of "Message | None" has no attribute "text"  [union-attr]
src/bot/handlers/wizard_scale_order.py:92: error: Item "None" of "str | Any | None" has no attribute "strip"  [union-attr]
src/bot/handlers/wizard_scale_order.py:98: error: Unsupported target for indexed assignment ("dict[Any, Any] | None")  [index]
src/bot/handlers/wizard_scale_order.py:99: error: Unsupported target for indexed assignment ("dict[Any, Any] | None")  [index]
src/bot/handlers/wizard_scale_order.py:117: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
src/bot/handlers/wizard_scale_order.py:130: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
src/bot/handlers/wizard_scale_order.py:144: error: Item "None" of "CallbackQuery | None" has no attribute "answer"  [union-attr]
src/bot/handlers/wizard_scale_order.py:146: error: Item "None" of "CallbackQuery | None" has no attribute "data"  [union-attr]
src/bot/handlers/wizard_scale_order.py:150: error: Item "None" of "CallbackQuery | None" has no attribute "data"  [union-attr]
src/bot/handlers/wizard_scale_order.py:151: error: Unsupported target for indexed assignment ("dict[Any, Any] | None")  [index]
src/bot/handlers/wizard_scale_order.py:170: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/wizard_scale_order.py:185: error: Item "None" of "CallbackQuery | None" has no attribute "answer"  [union-attr]
src/bot/handlers/wizard_scale_order.py:187: error: Item "None" of "CallbackQuery | None" has no attribute "data"  [union-attr]
src/bot/handlers/wizard_scale_order.py:191: error: Item "None" of "CallbackQuery | None" has no attribute "data"  [union-attr]
src/bot/handlers/wizard_scale_order.py:192: error: Unsupported target for indexed assignment ("dict[Any, Any] | None")  [index]
src/bot/handlers/wizard_scale_order.py:194: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_scale_order.py:195: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_scale_order.py:196: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_scale_order.py:201: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/wizard_scale_order.py:211: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/wizard_scale_order.py:223: error: Item "None" of "Message | None" has no attribute "text"  [union-attr]
src/bot/handlers/wizard_scale_order.py:223: error: Item "None" of "str | Any | None" has no attribute "strip"  [union-attr]
src/bot/handlers/wizard_scale_order.py:224: error: Unsupported target for indexed assignment ("dict[Any, Any] | None")  [index]
src/bot/handlers/wizard_scale_order.py:226: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_scale_order.py:227: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_scale_order.py:228: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_scale_order.py:232: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
src/bot/handlers/wizard_scale_order.py:241: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
src/bot/handlers/wizard_scale_order.py:262: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
src/bot/handlers/wizard_scale_order.py:273: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
src/bot/handlers/wizard_scale_order.py:282: error: Item "None" of "CallbackQuery | None" has no attribute "answer"  [union-attr]
src/bot/handlers/wizard_scale_order.py:284: error: Item "None" of "CallbackQuery | None" has no attribute "data"  [union-attr]
src/bot/handlers/wizard_scale_order.py:288: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_scale_order.py:289: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_scale_order.py:290: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_scale_order.py:293: error: Item "None" of "CallbackQuery | None" has no attribute "data"  [union-attr]
src/bot/handlers/wizard_scale_order.py:299: error: Item "None" of "CallbackQuery | None" has no attribute "data"  [union-attr]
src/bot/handlers/wizard_scale_order.py:299: error: Item "None" of "str | Any | None" has no attribute "split"  [union-attr]
src/bot/handlers/wizard_scale_order.py:312: error: Unsupported target for indexed assignment ("dict[Any, Any] | None")  [index]
src/bot/handlers/wizard_scale_order.py:313: error: Unsupported target for indexed assignment ("dict[Any, Any] | None")  [index]
src/bot/handlers/wizard_scale_order.py:322: error: Item "None" of "Message | None" has no attribute "text"  [union-attr]
src/bot/handlers/wizard_scale_order.py:322: error: Item "None" of "str | Any | None" has no attribute "strip"  [union-attr]
src/bot/handlers/wizard_scale_order.py:323: error: Unsupported target for indexed assignment ("dict[Any, Any] | None")  [index]
src/bot/handlers/wizard_scale_order.py:325: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_scale_order.py:326: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_scale_order.py:328: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
src/bot/handlers/wizard_scale_order.py:338: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
src/bot/handlers/wizard_scale_order.py:347: error: Item "None" of "Message | None" has no attribute "text"  [union-attr]
src/bot/handlers/wizard_scale_order.py:347: error: Item "None" of "str | Any | None" has no attribute "strip"  [union-attr]
src/bot/handlers/wizard_scale_order.py:348: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_scale_order.py:351: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
src/bot/handlers/wizard_scale_order.py:358: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_scale_order.py:362: error: Unsupported target for indexed assignment ("dict[Any, Any] | None")  [index]
src/bot/handlers/wizard_scale_order.py:363: error: Unsupported target for indexed assignment ("dict[Any, Any] | None")  [index]
src/bot/handlers/wizard_scale_order.py:365: error: Unsupported target for indexed assignment ("dict[Any, Any] | None")  [index]
src/bot/handlers/wizard_scale_order.py:366: error: Unsupported target for indexed assignment ("dict[Any, Any] | None")  [index]
src/bot/handlers/wizard_scale_order.py:372: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
src/bot/handlers/wizard_scale_order.py:389: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_scale_order.py:390: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_scale_order.py:415: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_scale_order.py:416: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_scale_order.py:419: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
src/bot/handlers/wizard_scale_order.py:433: error: Item "None" of "CallbackQuery | None" has no attribute "answer"  [union-attr]
src/bot/handlers/wizard_scale_order.py:435: error: Item "None" of "CallbackQuery | None" has no attribute "data"  [union-attr]
src/bot/handlers/wizard_scale_order.py:439: error: Item "None" of "CallbackQuery | None" has no attribute "data"  [union-attr]
src/bot/handlers/wizard_scale_order.py:440: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/wizard_scale_order.py:446: error: Item "None" of "CallbackQuery | None" has no attribute "data"  [union-attr]
src/bot/handlers/wizard_scale_order.py:446: error: Item "None" of "str | Any | None" has no attribute "split"  [union-attr]
src/bot/handlers/wizard_scale_order.py:447: error: Unsupported target for indexed assignment ("dict[Any, Any] | None")  [index]
src/bot/handlers/wizard_scale_order.py:450: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/wizard_scale_order.py:463: error: Item "None" of "Message | None" has no attribute "text"  [union-attr]
src/bot/handlers/wizard_scale_order.py:463: error: Item "None" of "str | Any | None" has no attribute "strip"  [union-attr]
src/bot/handlers/wizard_scale_order.py:466: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
src/bot/handlers/wizard_scale_order.py:471: error: Unsupported target for indexed assignment ("dict[Any, Any] | None")  [index]
src/bot/handlers/wizard_scale_order.py:474: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
src/bot/handlers/wizard_scale_order.py:484: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
src/bot/handlers/wizard_scale_order.py:493: error: Item "None" of "Message | None" has no attribute "text"  [union-attr]
src/bot/handlers/wizard_scale_order.py:493: error: Item "None" of "str | Any | None" has no attribute "strip"  [union-attr]
src/bot/handlers/wizard_scale_order.py:496: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
src/bot/handlers/wizard_scale_order.py:501: error: Unsupported target for indexed assignment ("dict[Any, Any] | None")  [index]
src/bot/handlers/wizard_scale_order.py:519: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_scale_order.py:522: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
src/bot/handlers/wizard_scale_order.py:534: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
src/bot/handlers/wizard_scale_order.py:543: error: Item "None" of "CallbackQuery | None" has no attribute "answer"  [union-attr]
src/bot/handlers/wizard_scale_order.py:545: error: Item "None" of "CallbackQuery | None" has no attribute "data"  [union-attr]
src/bot/handlers/wizard_scale_order.py:549: error: Item "None" of "CallbackQuery | None" has no attribute "data"  [union-attr]
src/bot/handlers/wizard_scale_order.py:550: error: Unsupported target for indexed assignment ("dict[Any, Any] | None")  [index]
src/bot/handlers/wizard_scale_order.py:555: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_scale_order.py:556: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_scale_order.py:557: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_scale_order.py:558: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_scale_order.py:559: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_scale_order.py:560: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_scale_order.py:561: error: Argument "distribution_type" to "ScaleOrderConfig" has incompatible type "str"; expected "Literal['linear', 'geometric']"  [arg-type]
src/bot/handlers/wizard_scale_order.py:567: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_scale_order.py:569: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_scale_order.py:599: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/wizard_scale_order.py:604: error: Unsupported target for indexed assignment ("dict[Any, Any] | None")  [index]
src/bot/handlers/wizard_scale_order.py:619: error: Item "None" of "CallbackQuery | None" has no attribute "answer"  [union-attr]
src/bot/handlers/wizard_scale_order.py:621: error: Item "None" of "CallbackQuery | None" has no attribute "data"  [union-attr]
src/bot/handlers/wizard_scale_order.py:627: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_scale_order.py:629: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/use_cases/portfolio/position_summary.py:240: error: "AccountService" has no attribute "get_spot_state"  [attr-defined]
src/api/routes/scale_orders.py:141: error: "ScaleOrderResult" has no attribute "failed_orders"  [attr-defined]
src/api/routes/scale_orders.py:195: error: Missing named argument "coin" for "ListScaleOrdersRequest"  [call-arg]
src/services/order_service.py:54: error: Returning Any from function declared to return "list[dict[str, Any]]"  [no-any-return]
src/use_cases/trading/place_order.py:196: error: Incompatible return value type (got "tuple[float | None, float]", expected "tuple[float, float]")  [return-value]
src/use_cases/trading/place_order.py:240: error: Argument "limit_price" to "place_limit_order" of "OrderService" has incompatible type "float | None"; expected "float"  [arg-type]
src/services/rebalance_service.py:84: error: Incompatible types in assignment (expression has type "None", variable has type "list[str]")  [assignment]
src/services/rebalance_service.py:87: error: Incompatible types in assignment (expression has type "None", variable has type "list[str]")  [assignment]
src/services/rebalance_service.py:387: error: Argument 2 to "set_leverage_for_coin" of "RebalanceService" has incompatible type "int | None"; expected "int"  [arg-type]
src/bot/handlers/commands.py:40: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
src/bot/handlers/commands.py:51: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
src/bot/handlers/commands.py:78: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
src/bot/handlers/commands.py:91: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
src/bot/handlers/commands.py:119: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
src/bot/handlers/commands.py:130: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
src/bot/handlers/commands.py:196: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
src/bot/handlers/commands.py:217: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
src/bot/handlers/wizard_rebalance.py:37: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
src/bot/handlers/wizard_rebalance.py:43: error: Item "bool" of "Message | bool" has no attribute "edit_text"  [union-attr]
src/bot/handlers/wizard_rebalance.py:69: error: Item "bool" of "Message | bool" has no attribute "edit_text"  [union-attr]
src/bot/handlers/wizard_rebalance.py:77: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
src/bot/handlers/wizard_rebalance.py:83: error: Item "None" of "CallbackQuery | None" has no attribute "answer"  [union-attr]
src/bot/handlers/wizard_rebalance.py:85: error: Item "None" of "CallbackQuery | None" has no attribute "data"  [union-attr]
src/bot/handlers/wizard_rebalance.py:86: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/wizard_rebalance.py:89: error: Item "None" of "CallbackQuery | None" has no attribute "data"  [union-attr]
src/bot/handlers/wizard_rebalance.py:90: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/wizard_rebalance.py:98: error: Item "None" of "CallbackQuery | None" has no attribute "data"  [union-attr]
src/bot/handlers/wizard_rebalance.py:98: error: Item "None" of "str | Any | None" has no attribute "split"  [union-attr]
src/bot/handlers/wizard_rebalance.py:102: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/wizard_rebalance.py:126: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/wizard_rebalance.py:177: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/wizard_rebalance.py:181: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/wizard_rebalance.py:189: error: Item "None" of "CallbackQuery | None" has no attribute "answer"  [union-attr]
src/bot/handlers/wizard_rebalance.py:192: error: Item "None" of "CallbackQuery | None" has no attribute "data"  [union-attr]
src/bot/handlers/wizard_rebalance.py:192: error: Item "None" of "str | Any | None" has no attribute "split"  [union-attr]
src/bot/handlers/wizard_rebalance.py:196: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/wizard_rebalance.py:230: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/wizard_rebalance.py:237: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/wizard_rebalance.py:241: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/menus.py:22: error: Item "None" of "CallbackQuery | None" has no attribute "answer"  [union-attr]
src/bot/handlers/menus.py:30: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/menus.py:41: error: Item "None" of "CallbackQuery | None" has no attribute "answer"  [union-attr]
src/bot/handlers/menus.py:45: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/menus.py:64: error: Item "bool" of "Message | bool | Any" has no attribute "edit_text"  [union-attr]
src/bot/handlers/menus.py:67: error: Unsupported target for indexed assignment ("dict[Any, Any] | None")  [index]
src/bot/handlers/menus.py:67: error: Item "bool" of "Message | bool | Any" has no attribute "message_id"  [union-attr]
src/bot/handlers/menus.py:68: error: Unsupported target for indexed assignment ("dict[Any, Any] | None")  [index]
src/bot/handlers/menus.py:68: error: Item "bool" of "Message | bool | Any" has no attribute "chat_id"  [union-attr]
src/bot/handlers/menus.py:72: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/menus.py:82: error: Item "None" of "CallbackQuery | None" has no attribute "answer"  [union-attr]
src/bot/handlers/menus.py:86: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/menus.py:92: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/menus.py:148: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/menus.py:154: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/menus.py:165: error: Item "None" of "CallbackQuery | None" has no attribute "answer"  [union-attr]
src/bot/handlers/menus.py:185: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/menus.py:194: error: Item "None" of "CallbackQuery | None" has no attribute "answer"  [union-attr]
src/bot/handlers/menus.py:206: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/menus.py:215: error: Item "None" of "CallbackQuery | None" has no attribute "answer"  [union-attr]
src/bot/handlers/menus.py:219: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/menus.py:225: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/menus.py:232: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/menus.py:238: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/menus.py:249: error: Item "None" of "CallbackQuery | None" has no attribute "answer"  [union-attr]
src/bot/handlers/menus.py:252: error: Module "src.bot.handlers.commands" has no attribute "rebalance_command"  [attr-defined]
src/bot/handlers/menus.py:262: error: Item "None" of "CallbackQuery | None" has no attribute "answer"  [union-attr]
src/bot/handlers/menus.py:265: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/wizard_market_order.py:58: error: Item "None" of "CallbackQuery | None" has no attribute "answer"  [union-attr]
src/bot/handlers/wizard_market_order.py:66: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/wizard_market_order.py:76: error: Item "None" of "CallbackQuery | None" has no attribute "answer"  [union-attr]
src/bot/handlers/wizard_market_order.py:79: error: Item "None" of "CallbackQuery | None" has no attribute "data"  [union-attr]
src/bot/handlers/wizard_market_order.py:79: error: Item "None" of "str | Any | None" has no attribute "split"  [union-attr]
src/bot/handlers/wizard_market_order.py:80: error: Unsupported target for indexed assignment ("dict[Any, Any] | None")  [index]
src/bot/handlers/wizard_market_order.py:84: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/wizard_market_order.py:94: error: Item "None" of "CallbackQuery | None" has no attribute "answer"  [union-attr]
src/bot/handlers/wizard_market_order.py:97: error: Item "None" of "CallbackQuery | None" has no attribute "data"  [union-attr]
src/bot/handlers/wizard_market_order.py:97: error: Item "None" of "str | Any | None" has no attribute "split"  [union-attr]
src/bot/handlers/wizard_market_order.py:102: error: Unsupported target for indexed assignment ("dict[Any, Any] | None")  [index]
src/bot/handlers/wizard_market_order.py:103: error: Unsupported target for indexed assignment ("dict[Any, Any] | None")  [index]
src/bot/handlers/wizard_market_order.py:113: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/wizard_market_order.py:123: error: Item "None" of "CallbackQuery | None" has no attribute "answer"  [union-attr]
src/bot/handlers/wizard_market_order.py:126: error: Item "None" of "CallbackQuery | None" has no attribute "data"  [union-attr]
src/bot/handlers/wizard_market_order.py:126: error: Item "None" of "str | Any | None" has no attribute "split"  [union-attr]
src/bot/handlers/wizard_market_order.py:136: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_market_order.py:137: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_market_order.py:138: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_market_order.py:141: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/wizard_market_order.py:151: error: Unsupported target for indexed assignment ("dict[Any, Any] | None")  [index]
src/bot/handlers/wizard_market_order.py:152: error: Unsupported target for indexed assignment ("dict[Any, Any] | None")  [index]
src/bot/handlers/wizard_market_order.py:153: error: Unsupported target for indexed assignment ("dict[Any, Any] | None")  [index]
src/bot/handlers/wizard_market_order.py:169: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/wizard_market_order.py:179: error: Item "None" of "CallbackQuery | None" has no attribute "answer"  [union-attr]
src/bot/handlers/wizard_market_order.py:181: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_market_order.py:182: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_market_order.py:191: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/wizard_market_order.py:198: error: Item "None" of "Message | None" has no attribute "text"  [union-attr]
src/bot/handlers/wizard_market_order.py:201: error: Argument 1 to "parse_usd_amount" has incompatible type "str | Any | None"; expected "str"  [arg-type]
src/bot/handlers/wizard_market_order.py:203: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
src/bot/handlers/wizard_market_order.py:208: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_market_order.py:209: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_market_order.py:210: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_market_order.py:213: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
src/bot/handlers/wizard_market_order.py:223: error: Unsupported target for indexed assignment ("dict[Any, Any] | None")  [index]
src/bot/handlers/wizard_market_order.py:224: error: Unsupported target for indexed assignment ("dict[Any, Any] | None")  [index]
src/bot/handlers/wizard_market_order.py:225: error: Unsupported target for indexed assignment ("dict[Any, Any] | None")  [index]
src/bot/handlers/wizard_market_order.py:251: error: Item "None" of "CallbackQuery | None" has no attribute "answer"  [union-attr]
src/bot/handlers/wizard_market_order.py:253: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_market_order.py:254: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_market_order.py:255: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_market_order.py:256: error: Value of type "dict[Any, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_market_order.py:260: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/wizard_market_order.py:263: error: Missing named argument "usd_amount" for "PlaceOrderRequest"  [call-arg]
src/bot/handlers/wizard_market_order.py:263: error: Missing named argument "limit_price" for "PlaceOrderRequest"  [call-arg]
src/bot/handlers/wizard_market_order.py:263: error: Missing named argument "slippage" for "PlaceOrderRequest"  [call-arg]
src/bot/handlers/wizard_market_order.py:263: error: Missing named argument "reduce_only" for "PlaceOrderRequest"  [call-arg]
src/bot/handlers/wizard_market_order.py:263: error: Missing named argument "time_in_force" for "PlaceOrderRequest"  [call-arg]
src/bot/handlers/wizard_market_order.py:289: error: Item "None" of "dict[Any, Any] | None" has no attribute "clear"  [union-attr]
src/bot/handlers/wizard_market_order.py:297: error: Item "None" of "dict[Any, Any] | None" has no attribute "clear"  [union-attr]
src/bot/handlers/wizard_market_order.py:310: error: Item "None" of "dict[Any, Any] | None" has no attribute "clear"  [union-attr]
src/bot/handlers/wizard_close_position.py:43: error: Item "None" of "CallbackQuery | None" has no attribute "answer"  [union-attr]
src/bot/handlers/wizard_close_position.py:46: error: Item "None" of "CallbackQuery | None" has no attribute "data"  [union-attr]
src/bot/handlers/wizard_close_position.py:46: error: Item "None" of "str | Any | None" has no attribute "split"  [union-attr]
src/bot/handlers/wizard_close_position.py:50: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/wizard_close_position.py:54: error: Value of type "dict[str, Any] | None" is not indexable  [index]
src/bot/handlers/wizard_close_position.py:86: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/wizard_close_position.py:93: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/wizard_close_position.py:96: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/wizard_close_position.py:105: error: Item "None" of "CallbackQuery | None" has no attribute "answer"  [union-attr]
src/bot/handlers/wizard_close_position.py:108: error: Item "None" of "CallbackQuery | None" has no attribute "data"  [union-attr]
src/bot/handlers/wizard_close_position.py:108: error: Item "None" of "str | Any | None" has no attribute "split"  [union-attr]
src/bot/handlers/wizard_close_position.py:112: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
src/bot/handlers/wizard_close_position.py:115: error: Missing named argument "size" for "ClosePositionRequest"  [call-arg]
src/bot/handlers/wizard_close_position.py:115: error: Missing named argument "percentage" for "ClosePositionRequest"  [call-arg]
src/bot/handlers/wizard_close_position.py:115: error: Missing named argument "slippage" for "ClosePositionRequest"  [call-arg]
src/api/routes/orders.py:75: error: Missing named argument "usd_amount" for "PlaceOrderRequest"  [call-arg]
src/api/routes/orders.py:75: error: Missing named argument "limit_price" for "PlaceOrderRequest"  [call-arg]
src/api/routes/orders.py:75: error: Missing named argument "reduce_only" for "PlaceOrderRequest"  [call-arg]
src/api/routes/orders.py:75: error: Missing named argument "time_in_force" for "PlaceOrderRequest"  [call-arg]
src/api/routes/orders.py:127: error: Missing named argument "usd_amount" for "PlaceOrderRequest"  [call-arg]
src/api/routes/orders.py:127: error: Missing named argument "slippage" for "PlaceOrderRequest"  [call-arg]
src/api/routes/orders.py:127: error: Missing named argument "reduce_only" for "PlaceOrderRequest"  [call-arg]
src/api/routes/rebalance.py:314: error: Unsupported target for indexed assignment ("object")  [index]
src/api/routes/rebalance.py:317: error: Unsupported target for indexed assignment ("object")  [index]
src/api/routes/rebalance.py:318: error: Argument 1 to "round" has incompatible type "float | None"; expected "_SupportsRound2[float]"  [arg-type]
src/api/routes/rebalance.py:320: error: Unsupported target for indexed assignment ("object")  [index]
src/api/routes/rebalance.py:320: error: Argument 1 to "round" has incompatible type "float | None"; expected "_SupportsRound2[float]"  [arg-type]
src/api/routes/positions.py:209: error: Missing named argument "percentage" for "ClosePositionRequest"  [call-arg]
src/api/routes/positions.py:280: error: Missing named argument "size" for "ClosePositionRequest"  [call-arg]
src/bot/main.py:216: error: Item "None" of "JobQueue[Any] | None" has no attribute "run_repeating"  [union-attr]
src/api/main.py:77: error: Incompatible types in assignment (expression has type "dict[str, Any]", target has type "str")  [assignment]
src/api/main.py:80: error: Incompatible types in assignment (expression has type "dict[str, str]", target has type "str")  [assignment]
src/api/main.py:83: error: Item "str" of "str | dict[Never, Never]" has no attribute "get"  [union-attr]
src/api/main.py:83: error: No overload variant of "get" of "dict" matches argument types "str", "str"  [call-overload]
src/api/main.py:83: note: Possible overload variants:
src/api/main.py:83: note:     def get(self, Never, None = ..., /) -> None
src/api/main.py:83: note:     def get(self, Never, Never, /) -> Never
src/api/main.py:83: note:     def [_T] get(self, Never, _T, /) -> _T
